{% extends "user_account/user_base_account.html" %}
{% block account %}
<div>
    <form action="{% url 'account_details' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="update_info" value="1">
        {{ user_form.first_name.label_tag }}
        {{ user_form.first_name }}
        {% if user_form.first_name.errors %}
            <p style="color: red;">{{ user_form.first_name.errors.0}}</p>
        {% endif %}

        {{ user_form.last_name.label_tag }}
        {{ user_form.last_name }}
        {% if user_form.last_name.errors %}
            <p style="color: red;">{{ user_form.last_name.errors.0 }}</p>
        {% endif %}

        {{ user_form.username.label_tag }}
        {{ user_form.username }}
        {% if user_form.username.errors %}
            <p style="color: red;">{{ user_form.username.errors.0 }}</p>
        {% endif %}


        {{ user_form.email.label_tag }}
        {{ user_form.email }}
        {% if user_form.email.errors %}
            <p style="color: red;">{{ user_form.email.errors.0 }}</p>
        {% endif %}
        
        <button type="submit" class="btn btn-outline-primary-2 " style="margin-left: 300px;">
            <span>UPDATE INFORMATION</span>
            <i class="icon-long-arrow-right"></i>
        </button>
    </form>
     <br>
     <br>
    <form action="{% url 'account_details' %}" method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col-sm-6">
                <label>Current Password</label>
                {{ password_form.current_password }}
                 {% if password_form.current_password.errors.0 %}
                    <p style="color: red;">{{ password_form.current_password.errors.0 }}</p>
                {% endif %}
            </div>
            <div class="col-sm-6">
                <label>New Password</label>
                {{ password_form.new_password }}
                 {% if password_form.new_password.errors %}
                    <p style="color: red;">{{ password_form.new_password.errors.0 }}</p>
                {% endif %}
            </div>
        </div>
        <label>Confirm New Password</label>
        {{ password_form.confirm_password }}
        {% if password_form.confirm_password.errors %}
            <p style="color: red;">{{ password_form.confirm_password.errors.0 }}</p>
        {% endif %}
        <button type="submit" name="change_password" class="btn btn-outline-primary-2" style="margin-left: 300px;">
            <span>CHANGE PASSWORD</span>
            <i class="icon-long-arrow-right"></i>
        </button>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% comment %} <script>
    {% if messages %}
        {% for message in messages %}
            Swal.fire({
                icon: '{{ message.tags }}',
                title: '{{ message.tags }}',
                text: '{{ message }}',
            });
        {% endfor %}
    {% endif %}
</script> {% endcomment %}

<script>
    {% if messages %}
        {% for message in messages %}
            Swal.fire({
                icon: '{{ message.tags }}',
                title: '{{ message.tags }}',
                text: '{{ message }}',
                {% if message.tags == 'success' and password_updated %}
                footer: '<a href="{% url 'log_in' %}">Please log in</a>'
                {% endif %}
            });
        {% endfor %}
    {% endif %}
</script>

{% endblock account %}

