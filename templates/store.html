{% extends "n.html" %}
{% load static %}
{% block content %}


 <main class="main"> 
    <div class="page-header text-center" style="background-image: url('{% static '/assets/images/neww_kick_head.jpeg' %}')">
        <div class="container">
            <h1 class="page-title" style="color: white;">MY STORE <span style="color: white;">Shop</span></h1>
        </div><!-- End .container -->
    </div><!-- End .page-header -->
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'home'%}">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Shop</a></li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <div class="toolbox">
                        <div class="toolbox-left">
                            <div class="toolbox-info">
                                {% if category or brand %}
                                Showing <span>{{ all_products.start_index }}-{{ all_products.end_index }}</span> of <span>{{ all_products.paginator.count }}</span> Products
                            {% else %}
                                Showing <span>{{ all_products.start_index }}-{{ all_products.end_index }}</span> of <span>{{ all_products.paginator.count }} </span>Products
                            {% endif %}
                            </div><!-- End .toolbox-info -->
                        </div><!-- End .toolbox-left -->

                        <div class="toolbox-right">
                            <div class="toolbox-sort">

                                <form method="GET" id="sortForm">
    {% if cate_id %}
        <input type="hidden" name="categories" value="{{ cate_id }}">
    {% endif %}
    {% if brand_id %}
        <input type="hidden" name="brand" value="{{ brand_id }}">
    {% endif %}
    {% if min_price %}
        <input type="hidden" name="min_price" value="{{ min_price }}">
    {% endif %}
    {% if max_price %}
        <input type="hidden" name="max_price" value="{{ max_price }}">
    {% endif %}
    {% if query %}
        <input type="hidden" name="query" value="{{ query }}">
    {% endif %}

    <label for="sortby">Sort by:</label>
    <select name="sortby" id="sortby" class="form-control" onchange="this.form.submit()">
        <option value="date" {% if sortby == 'date' or not sortby %}selected{% endif %}>Newest</option>
        <option value="price_low_high" {% if sortby == 'price_low_high' %}selected{% endif %}>Price: Low to High</option>
        <option value="price_high_low" {% if sortby == 'price_high_low' %}selected{% endif %}>Price: High to Low</option>
    </select>
</form>

                                {% comment %} <label for="sortby">Sort by:</label>
                                <div class="select-custom">
                                    <select name="sortby" id="sortby" class="form-control">
                                        <option value="popularity" selected="selected">Newest </option>
                                        <option value="rating">Low to High </option>
                                        <option value="date">High to Low</option>
                                    </select>
                                </div>  {% endcomment %}
                            </div><!-- End .toolbox-sort -->
                            {% comment %} <div class="toolbox-layout">
                                <a href="category-list.html" class="btn-layout">
                                    <svg width="16" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="10" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="10" height="4" />
                                    </svg>
                                </a>

                                <a href="category-2cols.html" class="btn-layout">
                                    <svg width="10" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="4" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="4" height="4" />
                                    </svg>
                                </a>

                                <a href="category.html" class="btn-layout">
                                    <svg width="16" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="4" height="4" />
                                        <rect x="12" y="0" width="4" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="4" height="4" />
                                        <rect x="12" y="6" width="4" height="4" />
                                    </svg>
                                </a>

                                <a href="category-4cols.html" class="btn-layout active">
                                    <svg width="22" height="10">
                                        <rect x="0" y="0" width="4" height="4" />
                                        <rect x="6" y="0" width="4" height="4" />
                                        <rect x="12" y="0" width="4" height="4" />
                                        <rect x="18" y="0" width="4" height="4" />
                                        <rect x="0" y="6" width="4" height="4" />
                                        <rect x="6" y="6" width="4" height="4" />
                                        <rect x="12" y="6" width="4" height="4" />
                                        <rect x="18" y="6" width="4" height="4" />
                                    </svg>
                                </a>
                            </div><!-- End .toolbox-layout --> {% endcomment %}
                        </div><!-- End .toolbox-right -->
                    </div><!-- End .toolbox -->

                    <div class="products mb-3">
                        {% if all_products%}
                        <div class="row justify-content-center">
                        {% for product in all_products %}
                            <div class="col-6 col-md-4 col-lg-4 col-xl-3">
                                <div class="product product-7 text-center">
                                    <figure class="product-media">
                                        {% comment %} <span class="product-label label-new">New</span> {% endcomment %}
                                        <a href="{% url 'single-product' product.id %}">
                                            <img src="{{ product.images_set.first.image.url }}" alt="Product image" class="product-image">
                                        </a>

                                        <div class="product-action-vertical">
                                            <a href="#" onclick="addToWishlist({{ product.id }})" class="btn-product-icon btn-wishlist btn-expandable"><span>add to wishlist</span></a>
                                            {% comment %} <a href="popup/quickView.html" class="btn-product-icon btn-quickview" title="Quick view"><span>Quick view</span></a>
                                            <a href="#" class="btn-product-icon btn-compare" title="Compare"><span>Compare</span></a> {% endcomment %}
                                        </div><!-- End .product-action-vertical -->

                                        <div class="product-action">
                                            <a href="#" class="btn-product btn-cart"
                                                data-id="{{ product.id }}"
                                                data-name="{{ product.name }}"
                                                data-image="{{ product.images_set.first.image.url }}"
                                                data-sizes="{{ product.sizes_list }}">
                                            <span>add to cart</span></a>

                                        </div><!-- End .product-action -->
                                    </figure><!-- End .product-media -->

                                    <div class="product-body">
                                        <div class="product-cat">
                                            <a href="#">{{product.categories}}</a>
                                        </div><!-- End .product-cat -->
                                        <h3 class="product-title"><a href="{% url 'single-product' product.id %}">{{product.name}}</a></h3><!-- End .product-title -->
                                        <div class="">
                                            {% comment %} {{product.price}} {% endcomment %}
                                            {% if product.offer and product.offer.is_valid %}
                                                <del>₹{{ product.price|stringformat:'d'}}</del><br>
                                                <span class="discounted-price" style="font-size:18px;color:#c96;">₹{{ product.discounted_price|stringformat:'d' }}</span>
                                               
                                            {% else %}
                                            <span style="font-size:18px; color:#c96;">₹{{ product.price|stringformat:'d' }}</span>
                                            {% endif %}
                                           
                                        </div><!-- End .product-price -->
                                        {% comment %} {% if product.offer%}
                                        <p>{{product.didiscounted_price}}</p>
                                        {% endif %} {% endcomment %}
                                        {% comment %} <div class="ratings-container">
                                            <div class="ratings">
                                                <div class="ratings-val" style="width: 20%;"></div><!-- End .ratings-val -->
                                            </div><!-- End .ratings -->
                                            <span class="ratings-text">( 2 Reviews )</span>
                                        </div><!-- End .rating-container --> {% endcomment %}

                                        {% comment %} <div class="product-nav product-nav-thumbs">
                                            <a href="#" class="active">
                                                <img src="{% static 'assets/images/products/product-4-thumb.jpg' %}" alt="product desc">
                                            </a>
                                            <a href="#">
                                                <img src="{% static 'assets/images/products/product-4-2-thumb.jpg' %}" alt="product desc">
                                            </a>

                                            <a href="#">
                                                <img src="{% static 'assets/images/products/product-4-3-thumb.jpg' %}" alt="product desc">
                                            </a>
                                        </div><!-- End .product-nav --> {% endcomment %}
                                    </div><!-- End .product-body -->
                                </div><!-- End .product -->
                            </div><!-- End .col-sm-6 col-lg-4 col-xl-3 -->
                                  {% endfor %}
                            

                            

                           
                        
                            

                          
                        </div><!-- End .row -->
                        {%else%}
                        <div class="text-center py-5">
                            <h4 style="color: #c96;">No products found</h4>
                            <p>Try adjusting your filters or search keyword.</p>
                        </div>
                        {%endif%}

                    </div><!-- End .products -->


                    {% comment %} <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link page-link-prev" href="#" aria-label="Previous" tabindex="-1" aria-disabled="true">
                                    <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                                </a>
                            </li>
                            <li class="page-item active" aria-current="page"><a class="page-link" href="">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item-total">of 6</li>
                            <li class="page-item">
                                <a class="page-link page-link-next" href="#" aria-label="Next">
                                    Next <span aria-hidden="true"><i class="icon-long-arrow-right"></i></span>
                                </a>
                            </li>
                        </ul>
                    </nav> {% endcomment %}
                    {%if all_products%}
                    <nav aria-label="Page navigation">
                       
                            <ul class="pagination justify-content-center">
                                {% if all_products.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?categories={{ cate_id }}&brand={{ brand_id }}&sortby={{ sortby }}&page=1" aria-label="First">
                                            <span aria-hidden="true">&laquo;&laquo;</span>
                                        </a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="?categories={{ cate_id }}&brand={{ brand_id }}&sortby={{ sortby }}&page={{ all_products.previous_page_number }}" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                        
                                {% for page_num in all_products.paginator.page_range %}
                                    <li class="page-item{% if page_num == all_products.number %} active{% endif %}">
                                        <a class="page-link" href="?categories={{ cate_id }}&brand={{ brand_id }}&sortby={{ sortby }}&page={{ page_num }}">{{ page_num }}</a>
                                    </li>
                                {% endfor %}
                        
                                {% if all_products.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?categories={{ cate_id }}&brand={{ brand_id }}&sortby={{ sortby }}&page={{ all_products.next_page_number }}" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="?categories={{ cate_id }}&brand={{ brand_id }}&sortby={{ sortby }}&page={{ all_products.paginator.num_pages }}" aria-label="Last">
                                            <span aria-hidden="true">&raquo;&raquo;</span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        
                    </nav>
                    {%endif%}
                </div><!-- End .col-lg-9 -->
                <aside class="col-lg-3 order-lg-first">
                    <div class="sidebar sidebar-shop">
                        <div class="widget widget-clean">
                            <label>Filters:</label>
                            <a href="{% url 'store' %}" class="">Clean All</a>
                        </div><!-- End .widget widget-clean -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true" aria-controls="widget-1">
                                    Category
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-1">
                                <div class="widget-body">
                                    <div class="filter-items filter-items-count">
                                        {% for category in categories %}
                                        <li style="list-style: none;">
                                            <a href="?categories={{category.id}}{% if brand_id %}&brand={{brand_id}}{% endif %}{% if sortby %}&sortby={{sortby}}{% endif %}{% if min_price and max_price %}&min_price={{min_price}}&max_price={{max_price}}{% endif %}"
                                            class="{% if cate_id|default:'' == category.id|stringformat:'s' %}text-primary font-weight-bold{% endif %}">
                                            {{ category.name }}
                                            </a>
                                        </li>
                                        {% endfor %}
                                    </div><!-- End .filter-items -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->

                        

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-4" role="button" aria-expanded="true" aria-controls="widget-4">
                                    Brand
                                </a>
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-4">
                                <div class="widget-body">
                                    <div class="filter-items">
                                        <div class="filter-item">
                                            {% for brand in brands %}
                                            <li style="list-style: none;">
                                                <a href="?brand={{brand.id}}{% if cate_id %}&categories={{cate_id}}{% endif %}{% if sortby %}&sortby={{sortby}}{% endif %}{% if min_price and max_price %}&min_price={{min_price}}&max_price={{max_price}}{% endif %}"
                                                class="{% if brand_id|default:'' == brand.id|stringformat:'s' %}text-primary font-weight-bold{% endif %}">
                                                {{ brand.name }}
                                                </a>
                                            </li>
                                            {% endfor %}
                                        </div><!-- End .filter-item -->

                                     </div><!-- End .filter-items -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->

                        <div class="widget widget-collapsible">
                            <h3 class="widget-title">
                                <a data-toggle="collapse" href="#widget-5" role="button" aria-expanded="true" aria-controls="widget-5">
                                    Price
                                </a> 
                            </h3><!-- End .widget-title -->

                            <div class="collapse show" id="widget-5">
                                <div class="widget-body">
                                    <div class="filter-price">
                                                {% comment %} <div class="filter-price-text">
                                              </div><!-- End .filter-price-text -->
                                               {% endcomment %}
                                                <!--price range  -->
                                           <form method="GET" id="price-filter-form" style="padding:10px;" novalidate>
                                                {% if cate_id %}
                                                    <input type="hidden" name="categories" value="{{ cate_id }}">
                                                {% endif %}
                                                {% if brand_id %}
                                                    <input type="hidden" name="brand" value="{{ brand_id }}">
                                                {% endif %}
                                                {% if query %}
                                                    <input type="hidden" name="query" value="{{ query }}">
                                                {% endif %}
                                                {% if sortby %}
                                                    <input type="hidden" name="sortby" value="{{ sortby }}">
                                                {% endif %}

                                                <div style="display:flex; flex-direction:column; gap:12px;">
                                                    <!-- Min Price -->
                                                    <div style="display:flex; flex-direction:column;">
                                                        <label for="min_price" style="font-size:14px; font-weight:500; margin-bottom:4px;">
                                                            Min Price
                                                        </label>
                                                        <input type="number" id="min_price" name="min_price" 
                                                            value="{{ min_price|default:0 }}" min="0" max="9500" step="100" 
                                                            style="padding:8px 10px; border:1px solid #ddd; border-radius:6px; font-size:14px; width:100%;">
                                                    </div>

                                                    <!-- Max Price -->
                                                    <div style="display:flex; flex-direction:column;">
                                                        <label for="max_price" style="font-size:14px; font-weight:500; margin-bottom:4px;">
                                                            Max Price
                                                        </label>
                                                        <input type="number" id="max_price" name="max_price" 
                                                            value="{{ max_price|default:10000 }}" min="200" step="100"
                                                            style="padding:8px 10px; border:1px solid #ddd; border-radius:6px; font-size:14px; width:100%;">
                                                    </div>

                                                    <button type="submit" class="btn btn-sm btn-primary mt-1"
                                                            >
                                                        Apply Price
                                                    </button>
                                                </div>
                                            </form>
                                               
                                             </div><!-- End .filter-price -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .collapse -->
                        </div><!-- End .widget -->
                    </div><!-- End .sidebar sidebar-shop -->
                </aside><!-- End .col-lg-3 -->
            </div><!-- End .row -->
        </div><!-- End .container -->
    </div><!-- End .page-content -->


    <div class="modal fade" id="addToCartModal" tabindex="-1" role="dialog" aria-labelledby="addToCartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addToCartModalLabel">Add to Cart</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <div id="addToCartContent" class="modal-product">
                                <!-- Product details will be dynamically inserted here -->
                            </div>
                            <div class="details-filter-row details-row-size">
                                <label for="size">Size:</label>
                                <select name="size" id="size" class="form-control">
                                    <option value="" selected="selected">Select a size</option>
                                    <!-- sizes will be inserted dynamically -->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addToCart()">Add to Cart</button>
            </div>
        </div>
    </div>
</div>


</main><!-- End .main -->
  {% block scripts %}
    
   
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
     function addToWishlist(productId) {
             event.preventDefault(); 
            // Make an AJAX request to your add_to_wishlist view
            $.ajax({
                url: '{% url "wishlist-add" %}',  // Update this with your actual URL
                type: 'POST',
                data: {
                    'product_id': productId,
                    csrfmiddlewaretoken: '{{ csrf_token }}'  // Include CSRF token for Django
                },
                success: function(response) {

                    if (response.message) {
                        console.log('response ',response.message)
                        // Update wishlist count manually
                        let wishlistCountElement = document.getElementById("wishlist-count");
                        let currentCount = parseInt(wishlistCountElement?.innerText || 0);
                        wishlistCountElement.innerText = currentCount + 1; 

                        wishlistCountElement.style.display = "inline-block";

                      
                        const alertConfig = {
                            icon: 'success',
                            title: 'Success',
                            text: response.message,
                            customContainerClass: 'background-color: #28a745; color: white;',
                        };
                        Swal.fire(alertConfig);
                        
                    } else {
                        const alertConfig = {
                            icon: 'warning',
                            title: 'Warning',
                            text: response.error,
                            customContainerClass: 'background-color: #FF5733; color: white;',
                        };
                        Swal.fire(alertConfig);
                    }
                },
                error: function(error) {
                    const alertConfig = {
                        icon: 'error',
                        title: 'Error',
                        text: 'An unexpected error occurred',
                        customContainerClass: 'background-color: #FF5733; color: white;',
                    };
                    Swal.fire(alertConfig);
                }
            });
        }




         $(document).on("click", ".btn-cart", function (e) {
            e.preventDefault();

            console.log('cart button clicked')
            const isAuthenticated = {{ request.user.is_authenticated|yesno:"true,false" }};
            let name = $(this).data("name");
            let imageUrl = $(this).data("image");
            let productId = $(this).data("id");
            let sizes = $(this).data("sizes").split(",");

            if (!isAuthenticated) {
                    Swal.fire({
                        icon: 'warning',
                        title: 'Please login',
                        text: 'You must be logged in to add items to your cart.',
                    });
                    return;
            }

            // Build content dynamically
            let modalContent = `
                <h3 class="product-title">${name}</h3>
                <img src="${imageUrl}" alt="${name}" style="width:100px;height:auto;">
                <input type="hidden" value="${productId}" id="pid">
                
                <div class="details-filter-row details-row-size">
                    <label for="qty">Qty:</label>
                    <div class="product-details-quantity">
                        <input type="number" id="txtQty" name="qty" class="form-control" value="1" min="1" max="10" step="1" required>
                    </div>
                </div>
            `;

            // Insert product info
            $('#addToCartContent').html(modalContent);

            // Insert sizes dynamically
            let sizeSelect = $("#size");
            sizeSelect.empty();
            sizeSelect.append(`<option value="">Select a size</option>`);
            sizes.forEach(size => {
                sizeSelect.append(`<option value="${size}">${size}</option>`);
            });

            // Show modal
            $('#addToCartModal').modal('show');
        });



    function addToCart() {
        var productId = $('#pid').val();
        var size = $('#size').val();
        var quantity = $('#txtQty').val(); 


        if (!size || quantity <= 0) {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Please select a size and enter a valid quantity.',
                customContainerClass: 'background-color: #FF5733; color: white;',
            });
            return;
        }

        if(quantity > 10){
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'You can only order up to 10 items at a time.',
                customContainerClass: 'background-color: #FF5733; color: white;',
            });
            return;
        }

        var postObj = {
            product_qty: quantity,
            pid: productId,
            size: size,
        };


        fetch("{% url 'cart-add' %}", {
            method: 'POST',
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify(postObj),
        }).then(response => {
            return response.json();
        }).then(data => {
            console.log("Response Data:", data);

            let alertConfig = {
                icon: 'error',
                title: 'Error',
                text: 'An error occurred while adding the product to the cart.',
                customContainerClass: 'background-color: #FF5733; color: white;',
            };

            if (data.status === 'Product added to cart') {

                let cartItemCount = document.getElementById("cart-items-count");
                let currentCount = parseInt(cartItemCount?.innerText || 0);
                cartItemCount.innerText = currentCount + 1; 

                alertConfig = {
                    icon: 'success',
                    title: 'Success',
                    text: 'Product added to the cart successfully!',
                    customContainerClass: 'background-color: #28a745; color: white;',
                };
            } else if (data.status === 'Product already in cart!') {
                alertConfig = {
                    icon: 'info',
                    title: 'Info',
                    text: 'Product is already in the cart.',
                    customContainerClass: 'background-color: #007bff; color: white;',
                };
            } else if (data.status === 'Product stock not available' || data.status === 'Selected size not available for this product' || data.status === 'Product not found') {
                alertConfig = {
                    icon: 'error',
                    title: 'Error',
                    text: data.status,
                    customContainerClass: 'background-color: #FF5733; color: white;',
                };
            }else if(data.status === 'Please Login to add to cart'){
                alertConfig = {
                    icon: 'error',
                    title: 'Error',
                    text: data.status,
                    customContainerClass: 'background-color: #FF5733; color: white;',
                };

            }

            Swal.fire(alertConfig);

            // Close the modal
            $('#addToCartModal').modal('hide');
        }).catch(error => {
            console.error("Error:", error);
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'An unexpected error occurred.',
                customContainerClass: 'background-color: #FF5733; color: white;',
            });
        });
    }


    document.getElementById("price-filter-form").addEventListener("submit", function(event) {
    const minPrice = parseFloat(document.getElementById("min_price").value);
    const maxPrice = parseFloat(document.getElementById("max_price").value);

    
    if (isNaN(minPrice) || minPrice < 0) {
        event.preventDefault(); 
        Swal.fire({
            icon: 'warning',
            title: 'Invalid Minimum Amount',
            text: 'Please enter a valid positive number for Min Price.',
        });
        return;
        
       
    }

    if (isNaN(maxPrice) || maxPrice < 0) {
        event.preventDefault(); 
        Swal.fire({
            icon: 'warning',
            title: 'Invalid Maximum Amount',
            text: 'Please enter a valid positive number for Maximum Price.',
        });
        return;
        
    }

   
    if (minPrice >= maxPrice) {
        event.preventDefault(); 
        Swal.fire({
            icon: 'warning',
            title: 'Invalid Min Price',
            text: 'Min Price must be less than Max Price.',
        });
        return;
    }
});


{% if messages %}
{% for message in messages %}
    Swal.fire({
        icon: "{% if message.tags == 'success' %}success{% elif message.tags == 'error' %}error{% elif message.tags == 'warning' %}warning{% elif message.tags == 'info' %}info{% endif %}",
        title: "{{ message.tags }}",
        text: "{{ message }}",
    });
{% endfor %}
{% endif %}
    
</script>


 {% endblock scripts %}

{% endblock content %}